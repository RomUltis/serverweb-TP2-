<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>TP CIEL 1.1 </title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel='stylesheet' type='text/css' media='screen' href='toto.css'>
   
</head>
<body>
    <h1 id="id1" class="classTiti">APPEL API</h1>
   <div id="idListMedecin"> Chargement des Medecins </div>


   <input type="text" id="leNom"><input type="button" value="GO" id="lebuton">

 <pre>
    fetch('http://192.168.65.59:8080/Route1', {
        headers: {
            Accept: 'application/json'
        }
    }).then(response => {
        if (response.ok) {
            return response.json()
        } else {
            throw new Error('Erreur serveur', { cause: response })
        }
    }).then(result => {
        console.log('La liste des articles : ', result)
    }).catch(error => {
        console.error('Une erreur est survenue', error)
    })

    const express = require('express');
const mysql = require('mysql');
const cors = require('cors');

const app = express();

app.use(cors()); // on applique les poliques de sécurité cors

const port =  8080;

app.listen( 
    port, 
    () => { console.log('Mon server est démaré sur le port N°' + port);}
);

const bddConnection = mysql.createConnection(
    {   host: "192.168.65.219", // ip du server mariadb  
        database: "TD3", //nom de la base de donnée dans phpmyadmin
        user: "site1",  //user privilège dans phpmyadmin
        password: "site1" //mdp privilège dans phpmyadmin
    }
);

bddConnection.connect(
    function(err) {   if (err) throw err;   console.log("Julien Code est Connecté à la base Yo !"); }
);

app.get(
    '/Route1',
    (req, res) => {
         
        bddConnection.query("SELECT * FROM Medecin",   (err, results) => {
            if (err) {
              return res.status(500).send({ error: err.message });
            }
            // renvoie automatiquement en JSON
            res.json(results);
          });
    }
)
</pre>
   
</body>
<script src='main.js'></script>
</html>